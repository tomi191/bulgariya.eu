# Supabase Setup Guide - –†–µ—Ñ–µ—Ä–µ–Ω–¥—É–º –∑–∞ –ï–≤—Ä–æ—Ç–æ –≤ –ë—ä–ª–≥–∞—Ä–∏—è

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞

–¢–æ–≤–∞ –µ Mobile-First —É–µ–± –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω–¥—É–º –æ—Ç–Ω–æ—Å–Ω–æ –ø—Ä–∏—Å—ä–µ–¥–∏–Ω—è–≤–∞–Ω–µ—Ç–æ –Ω–∞ –ë—ä–ª–≥–∞—Ä–∏—è –∫—ä–º –µ–≤—Ä–æ–∑–æ–Ω–∞—Ç–∞. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ —Å—ä–±–∏—Ä–∞ –≥–ª–∞—Å–æ–≤–µ –æ—Ç anv√§ndare –∏ –ø–æ–∫–∞–∑–≤–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ –≤ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ —Å –∞–Ω–∏–º–∏—Ä–∞–Ω–∏ –≥—Ä–∞—Ñ–∏–∫–∏.

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**Supabase URL:** `https://asjgnkxgpppfvxbyjeka.supabase.co`

–í–∞—à–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–∏ –¥–∞–Ω–Ω–∏ —Å–∞ –≤–µ—á–µ –≤ `.env.local` —Ñ–∞–π–ª–∞.

## üìä –ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –¢–∞–±–ª–∏—Ü–∞: `votes`

–¢–∞–∑–∏ —Ç–∞–±–ª–∏—Ü–∞ —Å—ä—Ö—Ä–∞–Ω—è–≤–∞ –≤—Å–∏—á–∫–∏ –≥–ª–∞—Å–æ–≤–µ –æ—Ç –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏—Ç–µ.

#### SQL Schema:

```sql
-- –í–∫–ª—é—á–µ—Ç–µ rozshirenie –∑–∞ UUID –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

-- –°—ä–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ votes —Å –£–ù–ò–ö–ê–õ–ù–ò –∫–æ–Ω—Å—Ç—Ä–∞–∏–Ω—Ç–∏ –∑–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–∏
CREATE TABLE votes (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  name VARCHAR(255) NOT NULL,
  city VARCHAR(255) NOT NULL,
  email VARCHAR(255) NOT NULL UNIQUE,
  vote VARCHAR(10) NOT NULL CHECK (vote IN ('for', 'against')),
  ip_address VARCHAR(45) NOT NULL UNIQUE,
  user_agent TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- –°—ä–∑–¥–∞–π—Ç–µ –∏–Ω–¥–µ–∫—Å –∑–∞ –±—ä—Ä–∑–æ —Ç—ä—Ä—Å–µ–Ω–µ
CREATE INDEX idx_votes_vote ON votes(vote);
CREATE INDEX idx_votes_created_at ON votes(created_at);
CREATE INDEX idx_votes_email ON votes(email);
CREATE INDEX idx_votes_ip_address ON votes(ip_address);

-- –í–∫–ª—é—á–µ—Ç–µ Row Level Security (RLS)
ALTER TABLE votes ENABLE ROW LEVEL SECURITY;

-- –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª–∏–∫–∏ –∑–∞ RLS - –í—Å–µ–∫–∏ –º–æ–∂–µ –¥–∞ —á–µ—Ç–µ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ
CREATE POLICY "Enable read access for all users" ON votes
  FOR SELECT
  USING (true);

-- –°—ä–∑–¥–∞–π—Ç–µ –ø–æ–ª–∏–∫–∏ –∑–∞ RLS - –í—Å–µ–∫–∏ –º–æ–∂–µ –¥–∞ –≤–∫–∞—Ä–≤–∞ –Ω–æ–≤–∏ –≥–ª–∞—Å–æ–≤–µ
CREATE POLICY "Enable insert for all users" ON votes
  FOR INSERT
  WITH CHECK (true);
```

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –°—Ç—ä–ø–∫–∞ 1: –û—Ç–≤–æ—Ä–µ—Ç–µ Supabase Dashboard

1. –û—Ç–∏–¥–µ—Ç–µ –Ω–∞ https://app.supabase.com
2. –í–ª–µ–∑—Ç–µ —Å –≤–∞—à–∏—è –∞–∫–∞—É–Ω—Ç
3. –ò–∑–±–µ—Ä–µ—Ç–µ –≤–∞—à–∏—è –ø—Ä–æ–µ–∫—Ç

### –°—Ç—ä–ø–∫–∞ 2: –û—Ç–≤–æ—Ä–µ—Ç–µ SQL Editor

1. –û—Ç–∏–¥–µ—Ç–µ –Ω–∞ "SQL Editor" –≤ –ª–µ–≤–∏—è –º–µ–Ω—é
2. –©—Ä–∞–∫–Ω–µ—Ç–µ –Ω–∞ "New Query"

### –°—Ç—ä–ø–∫–∞ 3: –ö–æ–ø–∏—Ä–∞–π—Ç–µ –∏ –∏–∑–ø—ä–ª–Ω–µ—Ç–µ SQL Schema

1. –ö–æ–ø–∏—Ä–∞–π—Ç–µ —Ü–µ–ª–∏—è SQL –∫–æ–¥ –æ—Ç —Å–µ–∫—Ü–∏—è "SQL Schema" –ø–æ-–≥–æ—Ä–µ
2. –ó–∞–ª–µ–ø–µ—Ç–µ –≥–æ –≤ SQL Editor
3. –©—Ä–∞–∫–Ω–µ—Ç–µ –Ω–∞ "Run" –∏–ª–∏ –Ω–∞—Ç–∏—Å–Ω–µ—Ç–µ `Ctrl+Enter`

### –°—Ç—ä–ø–∫–∞ 4: –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞

1. –û—Ç–∏–¥–µ—Ç–µ –Ω–∞ "Tables" –≤ –ª–µ–≤–∏—è –º–µ–Ω—é
2. –í–∏–µ —Ç—Ä—è–±–≤–∞ –¥–∞ –≤–∏–¥–∏—Ç–µ —Ç–∞–±–ª–∏—Ü–∞ `votes`
3. –©—Ä–∞–∫–Ω–µ—Ç–µ –Ω–∞ –Ω–µ—è, –∑–∞ –¥–∞ –≤–∏–¥–∏—Ç–µ –∫–æ–ª–æ–Ω–∏—Ç–µ

## üîê –ó–∞—â–∏—Ç–∞ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ (GDPR) –∏ SPAM –∑–∞—â–∏—Ç–∞

### GDPR —Ñ—É–Ω–∫—Ü–∏–∏:

1. **GDPR Banner** - –ü–æ–∫–∞–∑–≤–∞ —Å–µ –ø—Ä–∏ –ø—ä—Ä–≤–æ –ø–æ—Å–µ—â–µ–Ω–∏–µ
2. **Privacy Policy** - –ú–æ–¥–∞–ª–µ–Ω –ø—Ä–æ–∑–æ—Ä–µ—Ü —Å –ø—ä–ª–Ω–∞ –ø–æ–ª–∏—Ç–∏–∫–∞ –∑–∞ –ª–∏—á–Ω–∏—è –∂–∏–≤–æ—Ç
3. **Cookie Management** - –ß—Ä–µ–∑ `js-cookie` –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
4. **Data Retention** - –î–∞–Ω–Ω–∏—Ç–µ —Å–µ —Å—ä—Ö—Ä–∞–Ω—è–≤–∞—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –Ω–∞ Supabase —Å—ä—Ä–≤–µ—Ä–∏—Ç–µ
5. **Row Level Security** - –ò–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞–Ω–∞ –µ RLS –∑–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª–Ω–∞ –∑–∞—â–∏—Ç–∞

### SPAM –∏ –º–∞–Ω–∏–ø—É–ª–∞—Ü–∏—è –∑–∞—â–∏—Ç–∞:

1. **Email Uniqueness** - –í—Å–µ–∫–∏ email –º–æ–∂–µ—Ç –¥–∞ –≥–ª–∞—Å—É–≤–∞ —Å–∞–º–æ –µ–¥–∏–Ω –ø—ä—Ç (UNIQUE constraint)
2. **IP Uniqueness** - –í—Å–µ–∫–∏ IP –∞–¥—Ä–µ—Å –º–æ–∂–µ –¥–∞ –≥–ª–∞—Å—É–≤–∞ —Å–∞–º–æ –µ–¥–∏–Ω –ø—ä—Ç (UNIQUE constraint)
3. **IP Tracking** - –°—ä–±–∏—Ä–∞–Ω–µ—Ç–æ –Ω–∞ IP –∞–¥—Ä–µ—Å–∞ –Ω–∞ –≤—Å–µ–∫–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª
4. **Front-end Validation** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –¥—É–±–ª–∏–∫–∞—Ç–∏ –ø—Ä–µ–¥–∏ –∏–∑–ø—Ä–∞—â–∞–Ω–µ
5. **Database Constraints** - –£–Ω–∏–∫–∞–ª–Ω–∏ –∫–æ–Ω—Å—Ç—Ä–∞–∏–Ω—Ç–∏ –Ω–∞ –ë–î –Ω–∏–≤–æ –∑–∞ –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –∑–∞—â–∏—Ç–∞

## üì± –§—É–Ω–∫—Ü–∏–∏ –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ

### 1. –§–æ—Ä–º–∞ –∑–∞ –≥–ª–∞—Å—É–≤–∞–Ω–µ
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∏–º–µ, –≥—Ä–∞–¥ –∏ –∏–º–µ–π–ª
- –ò–∑–±–æ—Ä –º–µ–∂–¥—É "–ó–∞ –ï–≤—Ä–æ—Ç–æ" –∏ "–ü—Ä–æ—Ç–∏–≤ –ï–≤—Ä–æ—Ç–æ"
- –†–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ –∑–∞–ø–∏—Å –Ω–∞ –¥–∞–Ω–Ω–∏

### 2. –†–µ–∑—É–ª—Ç–∞—Ç–∏ –≤ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ
- –õ–µ–Ω—Ç–æ–≤–∞ –¥–∏–∞–≥—Ä–∞–º–∞ (Bar Chart)
- –ö—Ä—ä–≥–æ–≤–∞ –¥–∏–∞–≥—Ä–∞–º–∞ (Pie Chart)
- –ü—Ä–æ—Ü–µ–Ω—Ç–Ω–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –Ω–æ–≤–∏ –≥–ª–∞—Å–æ–≤–µ (Real-time Subscriptions)

### 3. –°–æ—Ü–∏–∞–ª–Ω–∏ –º–µ–¥–∏–∏ —Å–ø–æ–¥–µ–ª—è–Ω–µ
- Facebook
- Twitter/X
- LinkedIn
- –ö–æ–ø–∏—Ä–∞–Ω–µ –Ω–∞ —Ç–µ–∫—Å—Ç

### 4. –î–∏–∑–∞–π–Ω
- Bento Grid –º–æ–¥–µ—Ä–µ–Ω –¥–∏–∑–∞–π–Ω
- Mobile First –æ–ø—Ç–∏–º–∏–∑–∏—Ä–∞–Ω–æ
- Framer Motion –∞–Ω–∏–º–∞—Ü–∏–∏
- Tailwind CSS —Å—Ç–∏–ª–∏–∑–∏—Ä–∞–Ω–æ

## üîÑ Real-time Updates

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ –∏–∑–ø–æ–ª–∑–≤–∞ Supabase Realtime subscriptions –∑–∞ –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ –≤ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ. –ö–æ–≥–∞—Ç–æ –Ω–æ–≤ –≥–ª–∞—Å –µ –∑–∞–ø–∏—Å–∞–Ω, –≤—Å–∏—á–∫–∏ –∞–∫—Ç–∏–≤–Ω–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –≤–∏–∂–¥–∞—Ç –ø—Ä–æ–º—è–Ω–∞—Ç–∞ –≤–µ–¥–Ω–∞–≥–∞.

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ development —Å—ä—Ä–≤—ä—Ä:
```bash
npm run dev
```

–°–∞–π—Ç—ä—Ç —â–µ –±—ä–¥–µ –¥–æ—Å—Ç—ä–ø–µ–Ω –Ω–∞ `http://localhost:3000`

### –ò–∑–≥—Ä–∞–∂–¥–∞–Ω–µ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ü–∏—è:
```bash
npm run build
npm start
```

## üìö API Routes

### POST `/api/votes`
–°—ä–∑–¥–∞–≤–∞ –Ω–æ–≤ –≥–ª–∞—Å –≤ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏.

## üîí Security Best Practices

1. ‚úÖ GDPR —Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
2. ‚úÖ Row Level Security (RLS)
3. ‚úÖ Email –≤–∞–ª–∏–¥–∞—Ü–∏—è
4. ‚úÖ CORS –∑–∞—â–∏—Ç–∞
5. ‚úÖ Input —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è
6. ‚úÖ Rate limiting –ø—Ä–µ–ø–æ—Ä—ä–∫–∏ (–∑–∞ –±—ä–¥–µ—â–∞ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è)

## üìù –ë–µ–ª–µ–∂–∫–∏

- –£–±–µ–¥–µ—Ç–µ —Å–µ, —á–µ Supabase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ç–∞ –µ –ø—Ä–∞–≤–∏–ª–Ω–∞ –ø—Ä–µ–¥–∏ –¥–∞ —Å—Ç–∞—Ä—Ç–∏—Ä–∞—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ
- –ó–∞ –ø—ä—Ä–≤–æ –∑–∞–ø—É—Å–∫–∞–Ω–µ —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–∑–ø—ä–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç–∞ –∑–∞ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ —Ä–∞–±–æ—Ç–∏ –±–µ–∑ –Ω–∏–∫–∞–∫–≤–∏ –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–ª–µ–¥ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞

## üÜò –†–µ—à–∞–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ–±–ª–µ–º–∏

### –ü—Ä–æ–±–ª–µ–º: "Cannot connect to Supabase"
- –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ `.env.local` —Ñ–∞–π–ª–∞
- –£–±–µ–¥–µ—Ç–µ —Å–µ, —á–µ NEXT_PUBLIC_SUPABASE_URL –∏ NEXT_PUBLIC_SUPABASE_ANON_KEY —Å–∞ –ø—Ä–∞–≤–∏–ª–Ω–∏

### –ü—Ä–æ–±–ª–µ–º: "Table does not exist"
- –ï–∫–∑–µ–∫—É—Ç–∏—Ä–∞–π—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç–∞ –æ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏—Ç–µ –ø–æ-–≥–æ—Ä–µ
- –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ —á–µ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ `votes` –µ –≤–∏–¥–∏–º–∞ –≤ Supabase Dashboard

### –ü—Ä–æ–±–ª–µ–º: "Insert failed"
- –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ —á–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏—Ç–µ —Å–∞ –∞–∫—Ç–∏–≤–∏—Ä–∞–Ω–∏
- –£–±–µ–¥–µ—Ç–µ —Å–µ —á–µ –≤—Å–∏—á–∫–∏ –∫–æ–ª–æ–Ω–∏ –∏–º–∞—Ç –ø—Ä–∞–≤–∏–ª–Ω–∏ —Ç–∏–ø–æ–≤–µ

## üìû –ü–æ–¥–¥—Ä—ä–∂–∫–∞

–ó–∞ –æ—Ñ–∏—Ü–∏–∞–ª–Ω–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –ø–æ—Å–µ—Ç–µ—Ç–µ Facebook —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞:
https://www.facebook.com/BYLGARI

---

**–í–µ—Ä—Å–∏—è:** 1.0
**–î–∞—Ç–∞:** –ù–æ–µ–º–≤—Ä–∏ 2024
**–ê–≤—Ç–æ—Ä:** Claude Code
